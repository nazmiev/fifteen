const isArrowFunctionExpression="babel-types"["isArrowFunctionExpression"],containerNode=document.getElementById("fifteen"),itemNodes=Array.from(containerNode.querySelectorAll(".item")),countItems=16;let swapsCounter=0;const result=document.getElementById("result"),podelitsya=document.getElementById("share");if(16!==itemNodes.length)throw new Error(`Должно быть ровно ${countItems} items in HTML`);itemNodes[countItems-1].style.display="none";let matrix=getMatrix(itemNodes.map(t=>Number(t.dataset.matrixId)));setPositionItems(matrix);let autoId=0;const knopkaSmartShuffle=document.getElementById("auto");knopkaSmartShuffle.addEventListener("click",()=>{autoId?(clearInterval(autoId),autoId=0,knopkaSmartShuffle.classList.remove("activeNow"),knopkaSmartShuffle.textContent="Еще мешай",console.log("unclick"),swapsCounter=0,result.classList.add("showResult"),result.textContent="Ваш результат: "):(autoId=setInterval(()=>{itemNodes[Math.floor(Math.random()*itemNodes.length)].click()},10),knopkaSmartShuffle.classList.add("activeNow"),knopkaSmartShuffle.textContent="Хватит",console.log("click"))});const blankNumber=16;function getMatrix(e){const o=[[],[],[],[]];let n=0,a=0;for(let t=0;t<e.length;t++)4<=n&&(a++,n=0),o[a][n]=e[t],n++;return o}function setPositionItems(o){for(let e=0;e<o.length;e++)for(let t=0;t<o[e].length;t++){var n=o[e][t];setNodeStyles(itemNodes[n-1],t,e)}}function setNodeStyles(t,e,o){t.style.transform=`translate3D(${100*e}%, ${100*o}%, 0)`}function shuffleArray(t){return t.map(t=>({value:t,sort:Math.random()})).sort((t,e)=>t.sort-e.sort).map(({value:t})=>t)}function findCoordinatesByNumber(o,n){for(let e=0;e<n.length;e++)for(let t=0;t<n[e].length;t++)if(n[e][t]===o)return{x:t,y:e};return null}function isValidForSwap(t,e){var o=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return!(1!==o&&1!==n||t.x!==e.x&&t.y!==e.y)}function swap(t,e,o){o[e.y][e.x]=[o[t.y][t.x],o[t.y][t.x]=o[e.y][e.x]][0],swapsCounter++,console.log(swapsCounter),result.textContent="Ваш результат: "+swapsCounter,isWon(o)&&(addWonClass(),knopkaSmartShuffle.textContent="Играть еще раз",podelitsya.classList.remove("shareHide"))}containerNode.addEventListener("click",t=>{var e=t.target.closest("button");!e||isValidForSwap(t=findCoordinatesByNumber(Number(e.dataset.matrixId),matrix),e=findCoordinatesByNumber(blankNumber,matrix))&&(swap(e,t,matrix),setPositionItems(matrix))}),window.addEventListener("keydown",t=>{if(t.key.includes("Arrow")){var e=findCoordinatesByNumber(blankNumber,matrix);const n={x:e.x,y:e.y};var o=t.key.split("Arrow")[1].toLowerCase(),t=matrix.length;switch(o){case"up":n.y+=1;break;case"down":--n.y;break;case"left":n.x+=1;break;case"right":--n.x}n.y>=t||n.y<0||n.x>=t||n.x<0||(swap(e,n,matrix),setPositionItems(matrix))}});const winFlatArray=new Array(16).fill(0).map((t,e)=>e+1);function isWon(t){var e=t.flat();for(let t=0;t<winFlatArray.length;t++)if(e[t]!==winFlatArray[t])return!1;return!0}const wonClass="fifteenWon";function addWonClass(){setTimeout(()=>{containerNode.classList.add(wonClass),setTimeout(()=>{containerNode.classList.remove(wonClass)},1e3)},200)}const kartinka=document.getElementById("hint");setTimeout(()=>{kartinka.classList.add("podskazkaShow"),setTimeout(()=>{kartinka.classList.remove("podskazkaShow")},2e3)},1e3),document.write(VK.Share.button({url:"https://nazmiev.github.io/fifteen/",title:"Сможешь побить мой рекорд в пятнашках?"},{type:"custom",text:'<img src="http://vk.com/images/vk32.png" />'}));