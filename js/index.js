const isArrowFunctionExpression="babel-types"["isArrowFunctionExpression"],containerNode=document.getElementById("fifteen"),itemNodes=Array.from(containerNode.querySelectorAll(".item")),countItems=16;if(16!==itemNodes.length)throw new Error(`Должно быть ровно ${countItems} items in HTML`);itemNodes[countItems-1].style.display="none";let matrix=getMatrix(itemNodes.map(t=>Number(t.dataset.matrixId)));setPositionItems(matrix),document.getElementById("shuffle").addEventListener("click",()=>{var t=shuffleArray(matrix.flat());matrix=getMatrix(t),setPositionItems(matrix)});let autoId=0;document.getElementById("auto").addEventListener("click",()=>{autoId?(clearInterval(autoId),autoId=0,console.log("unclick")):(autoId=setInterval(()=>{itemNodes[Math.floor(Math.random()*itemNodes.length)].click()},10),console.log("click"))});const blankNumber=16;function getMatrix(e){const n=[[],[],[],[]];let a=0,o=0;for(let t=0;t<e.length;t++)4<=a&&(o++,a=0),n[o][a]=e[t],a++;return n}function setPositionItems(n){for(let e=0;e<n.length;e++)for(let t=0;t<n[e].length;t++){var a=n[e][t];setNodeStyles(itemNodes[a-1],t,e)}}function setNodeStyles(t,e,n){t.style.transform=`translate3D(${100*e}%, ${100*n}%, 0)`}function shuffleArray(t){return t.map(t=>({value:t,sort:Math.random()})).sort((t,e)=>t.sort-e.sort).map(({value:t})=>t)}function findCoordinatesByNumber(n,a){for(let e=0;e<a.length;e++)for(let t=0;t<a[e].length;t++)if(a[e][t]===n)return{x:t,y:e};return null}function isValidForSwap(t,e){var n=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);return!(1!==n&&1!==a||t.x!==e.x&&t.y!==e.y)}function swap(t,e,n){n[e.y][e.x]=[n[t.y][t.x],n[t.y][t.x]=n[e.y][e.x]][0],isWon(n)&&(addWonClass(),clearInterval(autoId))}containerNode.addEventListener("click",t=>{var e=t.target.closest("button");!e||isValidForSwap(t=findCoordinatesByNumber(Number(e.dataset.matrixId),matrix),e=findCoordinatesByNumber(blankNumber,matrix))&&(swap(e,t,matrix),setPositionItems(matrix))}),window.addEventListener("keydown",t=>{if(t.key.includes("Arrow")){var e=findCoordinatesByNumber(blankNumber,matrix);const a={x:e.x,y:e.y};var n=t.key.split("Arrow")[1].toLowerCase(),t=matrix.length;switch(n){case"up":a.y+=1;break;case"down":--a.y;break;case"left":a.x+=1;break;case"right":--a.x}a.y>=t||a.y<0||a.x>=t||a.x<0||(swap(e,a,matrix),setPositionItems(matrix))}});const winFlatArray=new Array(16).fill(0).map((t,e)=>e+1);function isWon(t){var e=t.flat();for(let t=0;t<winFlatArray.length;t++)if(e[t]!==winFlatArray[t])return!1;return!0}const wonClass="fifteenWon";function addWonClass(){setTimeout(()=>{containerNode.classList.add(wonClass),setTimeout(()=>{containerNode.classList.remove(wonClass)},1e3)},200)}const kartinka=document.getElementById("hint");setTimeout(()=>{kartinka.classList.add("podskazkaShow"),setTimeout(()=>{kartinka.classList.remove("podskazkaShow")},2e3)},1e3);